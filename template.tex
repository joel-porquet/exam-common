%
% Header/footer
%
\usepackage{fancyhdr}
\pagestyle{fancy}
$if(exam)$
\lhead{Name:}
\chead{SID:}
$else$
\lhead{}
\chead{}
$endif$
\rhead{}
\lfoot{$course$ $quarter$ $year$}
\rfoot{$date$}
\cfoot{}

%
% Key environment
%
$if(key)$
\makeatletter\newenvironment{key}[1]{%
    \begin{lrbox}{\@tempboxa}\begin{minipage}{\linewidth}%
}{%
    \end{minipage}\end{lrbox}%
    \medskip%
    \framebox{\usebox{\@tempboxa}}%
    \medskip%
}\makeatother
$else$
\makeatletter\newenvironment{key}[1]{%
    \ifnum#1>0
    \fbox{\begin{minipage}{\linewidth}\hfill\vspace*{#1\baselineskip}\end{minipage}}%
    \fi
    \begin{lrbox}{\@tempboxa}\begin{minipage}{\linewidth}%
}{%
    \end{minipage}\end{lrbox}%
}\makeatother
$endif$

%
% Multi-column support
%
\usepackage{multicol}

% The columns environment is generated automatically by pandoc (for beamer)
% Overload it here using multicols and a default of 2 columns
\makeatletter\newenvironment{columns}[1][]{%
  \begin{multicols}{2}%
}{%
  \end{multicols}%
}\makeatother

% Overload column with \columnbreak
\makeatletter\newenvironment{column}[1]{%
}{%
  \columnbreak
}\makeatother

%
% Spacing
%
\usepackage{titlesec}

% Spacing around \paragraph{} title
\titlespacing{\paragraph}{%
  0pt}{%                left margin
  0.5em}{%              space before (vertical)
  0.5em}%               space after (horizontal)

% Space between paragraphs
\parskip 1em
